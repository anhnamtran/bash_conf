" General settings
set newtab about:blank
set smoothscroll true
set theme dark
set hintfiltermode vimperator-reflow
set hintnames numeric
set incsearch true
set wordpattern [^\s\/]+
set escapehatchsidebarhack false

" i to go to ignore mode
" Ctrl+Enter to leave ignore mode
command ignore mode ignore
bind --mode=ignore <C-Enter> mode normal
bind i mode ignore

" Faster scrolling
bind j scrollline 5
bind k scrollline -5

" Tab operations
bind L tabnext
bind H tabprev
bind yt tabduplicate
bind ;t tabdetach
bind ;T composite tabduplicate; tabdetach

alias tg tabgrab
alias tabc tabclose
alias tabm tabmove

command tabpush_and_focus jsb void async function(){const tabId=await activeTabId();fillcmdline("tabpush");while(true){if(tabId==await activeTabId())await sleep(50);else break}browser.tabs.update(tabId,{active:true});const tabNow=await browser.tabs.get(tabId);browser.windows.update(tabNow.windowId,{focused:true})}();

alias tp tabpush_and_focus

" tridactyl search
set findcase smart
bind / fillcmdline find
bind ? fillcmdline find -?
bind n findnext 1
bind N findnext -1
bind ,<Space> nohlsearch

" general browsing
bind <C-]> forward
bind <C-[> back

unbind --mode=normal <C-b>
bind --mode=browser <C-b> tab #

bind --mode=ex <C-w> text.backward_kill_word
bind --mode=input <C-w> text.backward_kill_word
bind --mode=insert <C-w> text.backward_kill_word

bind --mode=normal <AC-,> escapehatch
bind --mode=browser <AC-,> escapehatch

" Only hint search results on Google and DDG
bindurl www.google.com f hint -Jc #search div:not(.action-menu) > a
bindurl www.google.com F hint -Jbc #search div:not(.action-menu) > a
bindurl ^https://duckduckgo.com f hint -Jc [data-testid="result-title-a"]
bindurl ^https://duckduckgo.com F hint -Jbc [data-testid="result-title-a"]

unbind <Space>

" use tabs to change hints
set hintmaps.<Tab> hint.focusNextHint
set hintmaps.<S-Tab> hint.focusPreviousHint

autocmd TabEnter .* unfocus

" vim: ft=tridactyl
